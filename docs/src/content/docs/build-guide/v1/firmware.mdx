---
title: ファームウェアの書き込み
description: XIAO nRF52840へのファームウェアインストール
sidebar:
  order: 2
---

import { Steps } from "@astrojs/starlight/components";

2 つの XIAO nRF52840 Plus にファームウェアを書き込みます。

## 必要なもの

- XIAO nRF52840 Plus × 2
- USB ケーブル（Type-C、データ通信対応）
- PC

## ファームウェアファイルのダウンロード

ファームウェアレポジトリの [GitHub リリースページ](https://github.com/cormoran/zmk-keyboard-dya2/releases) を開き、最新版の以下のファイルをダウンロードします。

- 右手用: `zmk_dya2_right_trackball.uf2`
- 左手用: `zmk_dya2_left.uf2`

## 書き込み手順

### 1 つ目の XIAO（左手用）

<Steps>

1. **XIAO を PC に接続する**

   1 つ目の XIAO nRF52840 Plus を USB ケーブルで PC と接続します。

2. **書き込みモードに入る**

   XIAO のリセットボタンを素早く **2 回** 押します。
   PC に「XIAO-SENSE」という名前の USB ドライブが表示されれば成功です。
   詳しくは[こちらのサイト](https://qiita.com/KentaHarada/items/3e1612116ec45462a837#2-%E5%A4%89%E6%8F%9B%E3%81%97%E3%81%9Fuf2%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92xiao-nrf52840%E3%81%AB%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%82%80)などを参照してください。

3. **ファームウェアをコピーする**

   ダウンロードした左手用のファームウェア（`zmk_dya2_left.uf2`）を「XIAO-SENSE」ドライブにドラッグ＆ドロップします。

4. **書き込み完了を確認する**

   コピーが完了すると「XIAO-SENSE」ドライブが自動で切断されます。

</Steps>

### 2 つ目の XIAO（右手用）

<Steps>

1. **XIAO を PC に接続する**

   2 つ目の XIAO nRF52840 Plus を USB ケーブルで PC と接続します。

2. **書き込みモードに入る**

   同様にリセットボタンを素早く **2 回** 押します。

3. **ファームウェアをコピーする**

   右手用のファームウェア（`zmk_dya2_right_trackball.uf2`）を「XIAO-SENSE」ドライブにドラッグ＆ドロップします。

4. **書き込み完了を確認する**

   コピーが完了すると「XIAO-SENSE」ドライブが自動で切断されます。

</Steps>

どちらの XIAO に左右どちらのファームウェアを書き込んだか覚えておいてください。

:::note
左右を逆に取り付けても回路は壊れませんが、キーが逆転したりトラックボールが動かなかったりします。もし左右がわからなくなった場合でも、組み立て後に再度正しいファームウェアを書き込むことができます。
:::

## トラブルシューティング

**「XIAO-SENSE」ドライブが表示されない場合**

- USB ケーブルがデータ通信対応であることを確認してください（充電専用ケーブルは不可）
- リセットボタンを押す速さが遅い場合は表示されないことがあります。素早く 2 回押してください

**ファームウェアのコピー後に動作しない場合**

- 左右のファームウェアが逆になっていないか確認してください
- 再度書き込みモードに入り、正しいファームウェアを書き込み直してください
